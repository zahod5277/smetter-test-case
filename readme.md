# Тестовое задание для Smetter.ru

## Задание
Требуется разработать систему бронирования мест в самолете

На основной и единственной странице должно быть выведено:

1.    Блок с выбором города отправления и прибытия, а также даты отправления.

2.    Интерактивная схема рассадки пассажиров в самолете.

Каждому месту в самолете присваивается номер. После нажатия на любое незанятое место, система должна предложить ввести имя пассажира, а затем заблокировать возможность повторного выбора (забронировать). Должна быть возможность просмотра информации о пассажире, который занимает место. При изменении даты/города отправления/города прибытия система должна подгрузить информацию о бронировании по конкретному рейсу.
Список городов отправления и прибытия может быть любым.
Схема рассадки в самолете может быть любой, пример в приложении.
Учесть возможность одновременного бронирования одного и того же места

Условия и ограничения:

1.    Оформление возможно любое. Желательно использование Bootstrap 3/4.

2.    Запрещается использовать PHP фреймворки.

3.    Использовать ООП.

## Решение
На основе задания был разработан микро-фреймворк с использованием стандарта PSR-4.
Фреймворк состоит из:
- Autoload из Composer
- Модели, Контроллера, Роутера и View, плюс микро-обёртка над MySQLi, которая делает коннект и запрос
- Классы модели и контроллера расширяются, подразумевается, что одна сущность - одна связь модель-контроллер
- Роутер довольно простой, очень примитивная имитация REST API. Хотелось заморочится с регулярками и прочим, как например сделано в FastRoute, но переусложнять решение не хотелось
- View реализована с помощью шаблонизатора Fenom - очень простой и шустрый шаблонизатор. View хранятся в **app/templates/**

#### Потраченное время
На разработку ушло плюс/минус 20 часов. Два дня по 6 часов, два дня по 4 часа.
Первые 4 часа были нещадно потрачены на настройку Autoload, т.к. раньше не приходилось настраивать такое самостоятельно, а изначально я вообще собирался написать его вручную. Потом подумал и позаимстововал у Composer.

### Некоторые пояснения
Одна из ключевых особенностей - полное отсутствие какой-либо копипасты. Весь фреймфорк является плодом моей фантазии, и ни единой строчки не было скопировано откуда бы то ни было. Своеобразный челледж, который я поставил себе при работе над задачей.

Модель содержит два метода **getCollection** и **getObject**, которые выбирают массив данных и одну строку соответственно, поддерживают **JOIN** и **WHERE**

Контроллеры можно расширять как душе угодно, в частности, можно было добавить валидацию полей при заполнении, но я уже не успевал сдать в срок, посему отложил сиё. Держим в уме :)

Фронт собирается с помощью Gulp - склейка SCSS и JS в бандлы. Не люблю писать одной простыней, поэтому не удержался и добавил Gulp.

Фронт обрабатывает небольшой класс App - делает определенные валидации и посылает/принимает AJAX-запросы.

Вёрстка очень простая, с использованием BS4. Макет самолёта взят откуда-то с jsFiddle, так как поверх примера-картинки городить непонятно что не хотелось. А тут очень даже ничего. Нас же больше бэкенд интересует, верно?

В целом фреймворк очень простой, расширять и улучшать можно сколько угодно. Моей задачей было показать умение пользоваться PHP 7, ООП и паттернами. 

Любые вопросы и замечания - исключительно приветствуются.

### Установка
Скопировать куда-нибудь, где выполняется PHP, точка входа в приложение - **index.php**.
В моём случае разворачивалось в Homestead от Laravel. 
Далее импортировать дамп базы в СУБД и прописать конфиг базы в **app/App.php**.

**Готово!**



Некоторое время демо-проект будет болтаться по этому адресу: [http://zahod5277.beget.tech/](http://zahod5277.beget.tech/)

Он ни на йоту не отличается от проекта в Github, т.к. настроен прямой деплой на хостинг.  
